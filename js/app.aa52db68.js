(function(t){function e(e){for(var o,i,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},s=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0e71":function(t,e,n){"use strict";n("b238")},"14f6":function(t,e,n){"use strict";n("16a3")},"16a3":function(t,e,n){},"2e47":function(t,e,n){},3465:function(t,e,n){"use strict";n("72a9")},5519:function(t,e,n){"use strict";n("2e47")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},[n("b-row",[n("b-col",{staticStyle:{background:"linear-gradient(-33deg, #145DA0 0%, #0C2D48 100%)"},attrs:{cols:"3"}},[n("div",{staticClass:"left-bar"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search",attrs:{type:"text",placeholder:"Digite..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._l(t.resultQuery,(function(e){return n("Contacts",{key:e.id,attrs:{contact:e},nativeOn:{click:function(n){return t.selectContact(e)}}})})),n("b-row",{staticClass:"text-center"},[n("b-col",{attrs:{cols:"12"}},[n("b-button",{staticClass:"mb-3",staticStyle:{color:"transparent",border:"none",background:"transparent"},attrs:{size:"lg"},on:{click:function(e){return t.addNewContact()}}},[n("b-icon-plus-circle-fill",{staticClass:"add"})],1)],1)],1)],2)]),n("b-col",{staticStyle:{background:"#e2e2e2"},attrs:{cols:"9"}},[null!=t.contactSelected?n("div",[n("Details",{attrs:{contact:t.contactSelected},on:{remove:t.removeAlert}})],1):n("div",[n("div",{staticClass:"view-default"},[n("b-icon-telephone-plus",{staticClass:"view-default-icon"})],1)])])],1)],1),n("b-alert",{staticClass:"alert-mensage",attrs:{variant:"danger",dismissible:""},model:{value:t.showDismissibleAlert,callback:function(e){t.showDismissibleAlert=e},expression:"showDismissibleAlert"}},[t._v(" Você possui um contato que não foi salvo! ")]),n("b-modal",{attrs:{id:"modal-danger","header-bg-variant":"danger","header-text-variant":"light","ok-variant":"danger","cancel-variant":"success","cancel-title":"Cancelar",title:"Excluir contato"},on:{ok:t.remove,hidden:t.resetModal}},[n("p",{staticClass:"my-4"},[t._v("Deseja excluir realmente esse contato?")])])],1)},s=[],i=(n("a623"),n("4de4"),n("caad"),n("a434"),n("b0c0"),n("d3b7"),n("ac1f"),n("2532"),n("841c"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact row"},[n("div",{staticClass:"col-2 align-middle"},[n("div",{staticClass:"prefexi "},[t._v(t._s(t.prefexi()))])]),n("div",{staticClass:"name col-8 align-middle"},[t._v(t._s(t.contact.name))])])}),r=[],c={name:"Contacts",props:{contact:Object},methods:{prefexi:function(){var t=this.contact.name.split(" ");return t.length>1?(t[0].substr(0,1)+t[t.length-1].substr(0,1)).toUpperCase():t[0].substr(0,1).toUpperCase()}}},l=c,d=(n("0e71"),n("2877")),u=Object(d["a"])(l,i,r,!1,null,"04f67734",null),h=u.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"details"},[n("div",{staticClass:"card",staticStyle:{width:"100%"}},[n("div",{staticClass:"card-body"},[n("div",[n("div",[n("h1",{staticClass:"card-title"},[n("span",[t._v(t._s(t.contact.name))]),n("span",{staticClass:"edit-nome"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-xl",modifiers:{"modal-xl":!0}}],staticClass:"mb-3",staticStyle:{color:"transparent",border:"none",background:"transparent"},attrs:{size:"sm"}},[n("b-icon-pencil-fill",{attrs:{variant:"warning"}})],1)],1)])])]),t._l(t.contact.phones,(function(e,o){return n("Phones",{key:o,attrs:{phone:e},on:{remove:function(n){return t.remove(e.id,t.contact)},edit:function(e){return t.editPhoneNumber(o)}}})})),n("b-row",{staticClass:"text-center"},[n("b-col",{attrs:{cols:"12"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add-new-phone",modifiers:{"modal-add-new-phone":!0}}],staticClass:"mb-3",staticStyle:{color:"transparent",border:"none",background:"transparent"},attrs:{size:"lg"}},[n("b-icon-plus-circle-fill",{attrs:{variant:"success"}})],1)],1)],1)],2)]),n("div",{staticClass:"card",staticStyle:{width:"100%"}},[n("div",{staticClass:"card-body"},[n("Adresses",{attrs:{address:t.contact.address},on:{editAddress:t.editAddress}}),-1===t.contact.id?n("b-row",{staticStyle:{"margin-top":"10px"},attrs:{"align-h":"end"}},[n("b-col",{staticClass:"modal-footer",attrs:{cols:"12","align-self":"end"}},[n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.removeContact()}}},[t._v("Cancelar")]),n("b-button",{attrs:{variant:"success"},on:{click:t.save}},[t._v("Salvar")])],1)],1):t._e()],1)]),n("b-modal",{ref:"modal",attrs:{id:"modal-add-new-phone",title:"Adicionar número:","cancel-title":"Cancelar"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"*Número:","label-for":"name-input","invalid-feedback":"Informe um número válido!",state:t.phoneState}},[n("b-form-input",{attrs:{id:"name-input",state:t.phoneState,required:""},model:{value:t.newPhone,callback:function(e){t.newPhone=e},expression:"newPhone"}})],1)],1)]),n("b-modal",{attrs:{id:"modal-xl",size:"sm",title:"Nome:","cancel-title":"Cancelar"},on:{ok:t.validityModalName,show:function(e){t.newName=t.contact.name}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],attrs:{placeholder:"Digite o nome...",required:""},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}})]),n("b-alert",{staticClass:"alert-mensage",attrs:{show:t.dismissCountDown,dismissible:"",variant:"danger"},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(t._s(t.mensage)+" ")]),n("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Editar número","cancel-title":"Cancelar"},on:{hidden:t.resetModalPhone,ok:t.handleOkPhone}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"*Número:","label-for":"name-input","invalid-feedback":"Informe um número válido!",state:t.phoneState}},[n("b-form-input",{attrs:{id:"name-input",state:t.phoneState,required:""},model:{value:t.editPhone.number,callback:function(e){t.$set(t.editPhone,"number",e)},expression:"editPhone.number"}})],1)],1)])],1)},b=[],p=(n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"phone row"},[n("b-col",{attrs:{cols:"10"}},[n("h5",{staticClass:"number"},[n("b-icon-telephone-forward-fill",{attrs:{variant:"success"}}),t._v(" "+t._s(t.format())+" ")],1)]),n("b-col",{attrs:{cols:"1"}},[n("b-icon-pencil-fill",{staticClass:"icon",attrs:{variant:"warning"},on:{click:t.edit}})],1),n("b-col",{attrs:{cols:"1"}},[n("b-icon-trash-fill",{staticClass:"icon",attrs:{variant:"danger"},on:{click:t.remove}})],1)],1)}),f=[],v={name:"Phones",props:{phone:Object},methods:{format:function(){return this.phone.number.replace(/^(\d\d)(\d{5})(\d{4}).*/,"($1) $2-$3")},remove:function(){this.$emit("remove")},edit:function(){this.$emit("edit")}}},g=v,w=(n("5519"),Object(d["a"])(g,p,f,!1,null,"56271a11",null)),C=w.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("b-list-group",[n("b-list-group-item",[t._v("Rua: "+t._s(t.address.street))]),n("b-list-group-item",[t._v("Numero: "+t._s(t.address.number))]),n("b-list-group-item",[t._v("Bairro: "+t._s(t.address.neighborhood))]),n("b-list-group-item",[t._v("Cidade: "+t._s(t.address.city))])],1)],1),n("div",{staticClass:"edit-endereco"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-address",modifiers:{"modal-address":!0}}],staticClass:"mb-3",staticStyle:{color:"transparent",border:"none",background:"transparent"},attrs:{size:"lg"}},[n("b-icon-pencil-fill",{attrs:{variant:"warning"}})],1)],1),n("b-modal",{attrs:{id:"modal-address",size:"md",title:"Endereço:","cancel-title":"Cancelar"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{label:"*Rua:","label-for":"name-input"}},[n("b-form-input",{attrs:{required:""},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}})],1)],1)],1),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{label:"*Número:","label-for":"name-input"}},[n("b-form-input",{attrs:{required:""},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)],1),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{label:"*Bairro:","label-for":"name-input"}},[n("b-form-input",{attrs:{required:""},model:{value:t.neighborhood,callback:function(e){t.neighborhood=e},expression:"neighborhood"}})],1)],1)],1),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{label:"*Cidade:","label-for":"name-input"}},[n("b-form-input",{attrs:{required:""},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1)],1)],1)],1)])],1)},k=[],P={name:"Adresses",props:{address:{type:Object,default:function(){return{street:"",number:"",neighborhood:"",city:""}}}},data:function(){return{street:"",number:"",neighborhood:"",city:""}},methods:{checkFormValidity:function(){var t=this.$refs.form.checkValidity();return!t||0!=this.street.replace(/[^0-9A-z]/g,"").length&&0!=this.number.replace(/[^0-9A-z]/g,"").length&&0!=this.neighborhood.replace(/[^0-9A-z]/g,"").length&&0!=this.city.replace(/[^0-9A-z]/g,"").length||(t=!1,this.phoneState=t),t},resetModal:function(){this.street=this.address.street,this.number=this.address.number,this.neighborhood=this.address.neighborhood,this.city=this.address.city},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.checkFormValidity()&&(this.$emit("editAddress",{street:this.street,number:this.number,neighborhood:this.neighborhood,city:this.city}),this.$nextTick((function(){t.$bvModal.hide("modal-address")})))}}},S=P,x=(n("7b29"),Object(d["a"])(S,y,k,!1,null,"48e4e84e",null)),_=x.exports,O=n("bc3a"),A=n.n(O),N={name:"Details",components:{Phones:C,Adresses:_},props:{contact:Object},data:function(){return{dismissSecs:4,dismissCountDown:0,showDismissibleAlert:!1,mensage:null,newName:null,newPhone:"",editPhone:"",phoneState:null}},methods:{countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(t){this.mensage=t,this.dismissCountDown=this.dismissSecs,this.showDismissibleAlert=!0},validityModalName:function(){""!=this.newName&&null!=this.newName&&this.newName.replace(/[0-9]/gi,"").length>0&&(this.contact.name=this.newName,this.$bvModal.hide("modal-xl"))},checkFormValidity:function(){var t=!0;return t&&(this.newPhone.replace(/[^0-9]/g,"").length<10||this.newPhone.replace(/[^0-9]/g,"").length>11)&&(t=!1,this.phoneState=t),t},resetModal:function(){this.phoneState=null,this.newPhone=""},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.checkFormValidity()&&(-1!=this.contact.id?A.a.post("http://localhost:8000/contacts/"+this.contact.id+"/phone/"+this.newPhone).then((function(e){t.contact.phones.push({id:e.data,number:t.newPhone}),t.newPhone=""})):this.contact.phones.push({id:(new Date).getTime(),number:this.newPhone}),this.$nextTick((function(){t.$bvModal.hide("modal-add-new-phone")})))},editPhoneNumber:function(t){this.editPhone={id:this.contact.phones[t].id,number:this.contact.phones[t].number,index:t},this.editPhone.number=this.editPhone.number.replace(/^(\d\d)(\d{5})(\d{4}).*/,"($1) $2-$3"),this.$bvModal.show("modal-prevent-closing")},resetModalPhone:function(){},checkFormValidityPhone:function(){var t=!0;return(this.editPhone.number.replace(/[^0-9]/g,"").length<10||this.editPhone.number.replace(/[^0-9]/g,"").length>11)&&(t=!1,this.phoneState=t),t},handleOkPhone:function(t){t.preventDefault(),this.handleSubmitPhone()},handleSubmitPhone:function(){var t=this;this.checkFormValidityPhone()&&(A.a.put("http://localhost:8000/phone/"+this.editPhone.id+"/"+this.editPhone.number.replace(/[^0-9]/g,"")).then((function(e){200==e.status&&(console.log(e),t.contact.phones[t.editPhone.index].number=t.editPhone.number.replace(/[^0-9]/g,""),console.log(t.contact.phones[t.editPhone.index].number))})),this.$nextTick((function(){t.$bvModal.hide("modal-prevent-closing")})))},save:function(){var t=this;return console.log(this.contact),0==this.contact.phones.length?(this.showAlert("É preciso adionar ao menos um numero de telefone!"),!1):null==this.contact.address.street?(this.showAlert("A rua não pode ser nula!"),!1):null==this.contact.address.number?(this.showAlert("O numero não pode ser nulo!"),!1):null==this.contact.address.neighborhood?(this.showAlert("O bairro não pode ser nulo!"),!1):null==this.contact.address.city?(this.showAlert("A cidade não pode ser nula!"),!1):void A.a.post("http://localhost:8000/contacts/",JSON.stringify(this.contact),{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e.data),t.contact.id=e.data.id,t.contact.address.id=e.data.address.id,t.contact.phones=e.data.phones}))},remove:function(t,e){if(1==e.phones.length)this.removeContact();else for(var n=function(n){if(e.phones[n].id==t)return A.a.delete("http://localhost:8000/phone/"+e.phones[n].id).then((function(t){200==t.status&&e.phones.splice(n,1)})),"break"},o=0;o<e.phones.length;o++){var a=n(o);if("break"===a)break}},removeContact:function(){this.$emit("remove",this.contact.id)},editAddress:function(t){-1==this.contact.id&&(this.contact.address={street:t.street,number:t.number,neighborhood:t.neighborhood,city:t.city}),-1!=this.contact.id&&(this.contact.address.street=t.street,this.contact.address.number=t.number,this.contact.address.neighborhood=t.neighborhood,this.contact.address.city=t.city,A.a.put("http://localhost:8000/contacts/"+this.contact.id+"/",JSON.stringify(this.contact),{headers:{"Content-Type":"application/json"}}))}}},D=N,$=(n("14f6"),Object(d["a"])(D,m,b,!1,null,"5b2ee016",null)),M=$.exports,j={name:"App",components:{Contacts:h,Details:M},data:function(){return{search:null,contactSelected:null,showDismissibleAlert:!1,removeContact:null,contacts:[],baseUrl:window.location.protocol+"//"+window.location.host}},computed:{resultQuery:function(){var t=this;return this.search?this.contacts.filter((function(e){return t.search.toLowerCase().split(" ").every((function(t){return e.name.toLowerCase().includes(t)}))})):this.contacts}},methods:{selectContact:function(t){this.contactSelected=t,console.log(JSON.stringify(t))},addNewContact:function(){var t=this.contacts.filter((function(t){if(-1===t.id)return t}));0==t.length?(this.contacts.push({id:-1,name:"Novo Contato",phones:[],address:{}}),this.contactSelected=this.contacts[this.contacts.length-1]):this.showDismissibleAlert=!0},resetModal:function(){this.removeContact=null},removeAlert:function(t){this.removeContact=t,this.$bvModal.show("modal-danger")},remove:function(){for(var t=this,e=function(e){if(t.contacts[e].id==t.removeContact)return A.a.delete("http://localhost:8000/contacts/"+t.contacts[e].id).then((function(n){200==n.status&&t.contacts.splice(e,1)})),"break"},n=0;n<this.contacts.length;n++){var o=e(n);if("break"===o)break}this.contactSelected=null,this.resetModal()}},mounted:function(){var t=this;fetch("http://localhost:8000/contacts/").then((function(t){return t.json()})).then((function(e){return t.contacts=e}))}},z=j,T=(n("3465"),Object(d["a"])(z,a,s,!1,null,"074f8d7c",null)),q=T.exports,E=n("ac81"),V=n("008e");n("6614"),n("5ce4");o["default"].use(E["a"]),o["default"].use(V["a"]),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(q)}}).$mount("#app")},"72a9":function(t,e,n){},"7b29":function(t,e,n){"use strict";n("c16b")},b238:function(t,e,n){},c16b:function(t,e,n){}});
//# sourceMappingURL=app.aa52db68.js.map